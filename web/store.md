# Store

In SPA (single page applications), the term "store" is used to refer to a reactive object that contains a state acessible globally throughout the application. It's the same in Savitri, but with some additions as you might have imagined. First off, Savitri stores are automatically generated in the runtime from descriptions sent from backend. That means, the description of your collection being set in `api/collections`, you don't have to bother creating a store for leveraging it in the frontend.

Most importantly, though, is that autogenerated stores already comes with a handful of state props, getters and actions. Savitri also uses a REST-client-inside-store approach to deal with state changes.


## Using a store

Stores can be used like this:

```typescript
import { onMounted } from 'vue'
import { useStore } from '@savitri/web'

const personStore = useStore('person')
onMounted(async () => {
  await personStore.getAll()
  console.log(personStore.items)
})
```


## Defining (extending) a store

First off, define it like this. The `useCollection` unique parameter is a object that will be merged with the default store. This object is essentially the same object taken by Pinia's `defineStore`.

```typescript
// stores/person.ts
import { defineStore } from 'pinia'
import { useCollection } from '@savitri/web'

const collection = useCollection({
  actions: {
    greetings() {
      if( !this.item.name ) {
        this.store('meta').spawnModal({
          title: 'Error',
          text: 'You havent picked off a person yet'
        })
      }

      return this.store('meta').spawnModal({
        title: 'Greetings',
        text: `${this.i18n.t('hello')}, ${this.item.name}!`
      })
    }
  }
})

export default defineStore('person', collection)
```

Secondly, create a function that will be responsible of registering the store you just defined, otherwise it won't be usable. This is usually done in `stores/index.{ts,js}` file.

```typescript
export default () => {
  registerStore(import('./person'))
}
```

At last, import default as `extendStore` and cast it somewhere in your module config function.
